{"version":3,"sources":["firebase.js","SidebarChat.js","StateProvider.js","Sidebar.js","Chat.js","reducer.js","Login.js","App.js","index.js"],"names":["db","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","firestore","auth","provider","GoogleAuthProvider","SidebarChat","id","name","addNewChat","useState","seed","setSeed","messages","setMessages","useEffect","collection","doc","orderBy","onSnapshot","snapshot","docs","map","data","Math","floor","random","onClick","roomName","prompt","add","className","to","Avatar","src","message","StateContext","createContext","StateProvider","reducer","initialState","children","Provider","value","useReducer","useStateValue","useContext","Sidebar","rooms","setRooms","user","unsubscribe","photoURL","IconButton","placeholder","type","room","key","Chat","input","setInput","roomId","useParams","setRoomName","Date","length","timestamp","toDate","toUTCString","displayName","action","onChange","e","target","preventDefault","FieldValue","serverTimestamp","console","log","actionTypes","state","Login","dispatch","alt","Button","signInWithPopup","then","result","catch","error","alert","App","path","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.0547f3c8.chunk.js","sourcesContent":["import firebase from 'firebase';\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyC7DJyEc6rPW4ZxKE8UV80pfCBMDzp1LzE\",\r\n  authDomain: \"whatsapp-clone-cc25c.firebaseapp.com\",\r\n  databaseURL: \"https://whatsapp-clone-cc25c.firebaseio.com\",\r\n  projectId: \"whatsapp-clone-cc25c\",\r\n  storageBucket: \"whatsapp-clone-cc25c.appspot.com\",\r\n  messagingSenderId: \"553373298050\",\r\n  appId: \"1:553373298050:web:2c0db17a57a449c400b39b\",\r\n  measurementId: \"G-T82F7YN2FP\"\r\n};\r\n\r\nconst firebaseApp = firebase.initializeApp(firebaseConfig);\r\nconst db = firebaseApp.firestore();\r\nconst auth = firebase.auth();\r\nconst provider = new firebase.auth.GoogleAuthProvider();\r\n\r\nexport {auth,provider};\r\nexport default db;\r\n","import React from 'react';\r\nimport './SidebarChat.css';\r\nimport {useEffect, useState} from 'react';\r\nimport {Avatar} from '@material-ui/core';\r\nimport db from './firebase';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction SidebarChat({ id, name, addNewChat }){\r\n  {/* Make A seed for set in Avatar source */}\r\n  const [seed, setSeed] = useState(\"\");\r\n  const [messages, setMessages] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if(id){\r\n      db.collection('rooms')\r\n        .doc(id)\r\n        .collection('messages')\r\n        .orderBy('timestamp','desc')\r\n        .onSnapshot((snapshot) => (\r\n          setMessages(snapshot.docs.map((doc) => doc.data()))\r\n        ))\r\n    }\r\n  },[id])\r\n\r\n  useEffect(() => {\r\n    setSeed(Math.floor(Math.random() * 5000));\r\n  },[])\r\n\r\n  const createChat = () => {\r\n    const roomName = prompt('Please enter name for chat');\r\n    if(roomName){\r\n      db.collection('rooms').add({\r\n        name:roomName,\r\n      });\r\n    }\r\n  };\r\n\r\n  return !addNewChat ? (\r\n    <Link to={`/rooms/${id}`}>\r\n    <div className=\"sidebarChat\">\r\n      <Avatar src={`https://avatars.dicebear.com/api/human/${seed}.svg`}/>\r\n      <div className=\"sidebarChat__info\">\r\n        <h2 className=\"\">\r\n          {name}\r\n        </h2>\r\n        <p>{messages[0]?.message}</p>\r\n      </div>\r\n    </div>\r\n    </Link>\r\n    ) : (\r\n      <div onClick={createChat} className=\"sidebarChat\">\r\n        <h2>Add new chat</h2>\r\n      </div>\r\n    );\r\n}\r\n\r\nexport default SidebarChat;\r\n","import React, { createContext, useContext, useReducer } from 'react';\r\nexport const StateContext = createContext();\r\n\r\nexport const StateProvider = ({ reducer, initialState, children}) => (\r\n  <StateContext.Provider value={useReducer(reducer, initialState)}>\r\n    {children}\r\n    </StateContext.Provider>\r\n);\r\n\r\nexport const useStateValue = () => useContext(StateContext);\r\n","import React, {useState,useEffect} from 'react';\r\nimport { Avatar, IconButton } from '@material-ui/core';\r\nimport DonutLargeIcon from '@material-ui/icons/DonutLarge';\r\nimport ChatIcon from '@material-ui/icons/Chat';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport SearchOutlinedIcon from '@material-ui/icons/SearchOutlined';\r\nimport SidebarChat from './SidebarChat.js';\r\nimport './Sidebar.css';\r\nimport db from './firebase.js';\r\nimport { useStateValue } from './StateProvider';\r\n\r\nfunction Sidebar(){\r\n  const [rooms,setRooms] = useState([]);\r\n  const [{ user }, dispatch] = useStateValue();\r\n\r\n  useEffect(() =>{\r\n    const unsubscribe = db.collection('rooms').onSnapshot(snapshot => (\r\n      setRooms(snapshot.docs.map(doc => ({\r\n          id:doc.id,\r\n          data: doc.data()\r\n        }))\r\n      )\r\n    ));\r\n\r\n    return () => {\r\n      unsubscribe();\r\n    }\r\n\r\n  }, []);\r\n  return(\r\n    <div className=\"sidebar\">\r\n      <div className=\"sidebar__header\">\r\n        <Avatar src={user?.photoURL}/>\r\n      <div className=\"sidebar__headerRight\">\r\n        <IconButton>\r\n          <DonutLargeIcon />\r\n        </IconButton>\r\n        <IconButton>\r\n          <ChatIcon/>\r\n        </IconButton>\r\n        <IconButton>\r\n          <MoreVertIcon/>\r\n        </IconButton>\r\n      </div>\r\n      </div>\r\n      <div className=\"sidebar__search\">\r\n        <div className=\"sidebar__searchContainer\">\r\n          <SearchOutlinedIcon />\r\n          <input placeholder=\"Search or start new chat\" type=\"text\"/>\r\n        </div>\r\n      </div>\r\n      <div className=\"sidebar__chats\">\r\n        <SidebarChat addNewChat/>\r\n        {rooms.map((room) =>{\r\n          return <SidebarChat key={room.id} id={room.id} name={room.data.name}/>\r\n        })}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Sidebar;\r\n","import React, {useEffect, useState} from 'react';\r\nimport './Chat.css';\r\nimport {Avatar, IconButton} from '@material-ui/core';\r\nimport SearchOutlinedIcon from '@material-ui/icons/SearchOutlined';\r\nimport AttachFileIcon from '@material-ui/icons/AttachFile';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport InsertEmoticonIcon from '@material-ui/icons/InsertEmoticon';\r\nimport MicIcon from '@material-ui/icons/Mic';\r\nimport {useParams} from 'react-router-dom';\r\nimport db from './firebase';\r\nimport firebase from 'firebase';\r\nimport {useStateValue} from './StateProvider';\r\n\r\nfunction Chat() {\r\n  const [input, setInput] = useState(\"\");\r\n  const [seed, setSeed] = useState(\"\");\r\n  const {roomId} = useParams();\r\n  const [roomName, setRoomName] = useState(\"\");\r\n  const [messages, setMessages] = useState([]);\r\n  const [{user}, dispatch] = useStateValue();\r\n\r\n  useEffect(() => {\r\n    if (roomId) {\r\n      db.collection('rooms').doc(roomId).onSnapshot(snapshot => (setRoomName(snapshot.data().name)))\r\n\r\n      db.collection('rooms')\r\n        .doc(roomId)\r\n        .collection('messages')\r\n        .orderBy('timestamp', 'asc')\r\n        .onSnapshot(snapshot => (setMessages(snapshot.docs.map(doc => doc.data()))));\r\n    }\r\n  }, [roomId]);\r\n\r\n  useEffect(() => {\r\n    setSeed(Math.floor(Math.random() * 5000));\r\n  }, [roomId]);\r\n\r\n  const sendMessage = (e) => {\r\n    e.preventDefault();\r\n    setInput('');\r\n    db.collection('rooms').doc(roomId).collection('messages').add({\r\n      message:input,\r\n      name:user.displayName,\r\n      timestamp: firebase.firestore.FieldValue.serverTimestamp()\r\n    })\r\n    console.log('You typed >>>', input);\r\n\r\n  }\r\n\r\n  return (<div className=\"chat\">\r\n    <div className=\"chat__header\">\r\n      <Avatar src={`https://avatars.dicebear.com/api/human/${seed}.svg`}/>\r\n      <div className=\"chat__headerInfo\">\r\n        <h3>{roomName}</h3>\r\n      <p>Last seen at {\" \"}{new Date(messages[messages.length - 1]?.timestamp?.toDate()).toUTCString()}</p>\r\n      </div>\r\n      <div className=\"chat__headerRight\">\r\n        <IconButton>\r\n          <SearchOutlinedIcon/>\r\n        </IconButton>\r\n        <IconButton>\r\n          <AttachFileIcon/>\r\n        </IconButton>\r\n        <IconButton>\r\n          <MoreVertIcon/>\r\n        </IconButton>\r\n      </div>\r\n    </div>\r\n    <div className=\"chat__body\">\r\n      {messages.map((message) => (\r\n        <p className={`chat__message ${message.name === user.displayName && \"chat__reciever\"}`}>\r\n          <span className=\"chat__name\">{message.name}</span>\r\n            {message.message}\r\n          <span className=\"chat__timestamp\">{new Date(message.timestamp?.toDate()).toUTCString()}</span>\r\n        </p>\r\n      ))}\r\n    </div>\r\n    <div className=\"chat__footer\">\r\n      <InsertEmoticonIcon/>\r\n      <form action=\"\">\r\n        <input value={input} onChange={e => setInput(e.target.value)} type=\"text\" placeholder=\"Type a message\"/>\r\n        <button onClick={sendMessage} type=\"submit\">Send a message</button>\r\n      </form>\r\n      <MicIcon/>\r\n    </div>\r\n  </div>);\r\n}\r\n\r\nexport default Chat;\r\n","export const initialState = {\r\n  user:null\r\n};\r\n\r\nexport const actionTypes = {\r\n  SET_USER:\"SET_USER\"\r\n};\r\n\r\nconst reducer = (state, action) =>{\r\n  console.log(action);\r\n  switch (action.type){\r\n    case actionTypes.SET_USER:\r\n      return {\r\n        ...state,\r\n        user:action.user\r\n      };\r\n\r\n      default:\r\n        return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","import React from 'react';\r\nimport {Button } from '@material-ui/core';\r\nimport './Login.css';\r\nimport {auth, provider} from './firebase';\r\nimport { actionTypes } from './reducer.js';\r\nimport { useStateValue } from './StateProvider';\r\n\r\nfunction Login(){\r\n  const [{}, dispatch] = useStateValue();\r\n\r\n  const signIn = () =>{\r\n    auth\r\n      .signInWithPopup(provider)\r\n      .then(result => {dispatch({\r\n          type:actionTypes.SET_USER,\r\n          user:result.user\r\n        })\r\n      })\r\n      .catch(error => alert(error.message));\r\n  };\r\n\r\n  return(\r\n    <div className=\"login\">\r\n      <div className=\"login__container\">\r\n        <img src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/WhatsApp.svg/1200px-WhatsApp.svg.png\" alt=\"whatsapp clone\"/>\r\n        <div className=\"login__text\">\r\n        <h1>Login to whatsapp</h1>\r\n        </div>\r\n        <Button onClick={signIn}>\r\n          Sign In with Google\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","import React from 'react';\nimport './App.css';\nimport Sidebar from './Sidebar.js';\nimport Chat from './Chat.js';\nimport {BrowserRouter as Router, Switch, Route} from \"react-router-dom\";\nimport Login from './Login.js';\nimport { useStateValue } from './StateProvider';\n\n\nfunction App() {\n  const [{ user }, dispatch] = useStateValue();\n\n  return (\n    <div className=\"app\">\n      <div className=\"app__body\">\n        {!user ? (\n          <Login />\n        ):(\n          <Router>\n            <Sidebar />\n            <Switch>\n              <Route path=\"/rooms/:roomId\" component={Chat}/>\n            </Switch>\n          </Router>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reducer, {initialState} from './reducer';\nimport { StateProvider } from './StateProvider';\n\nReactDOM.render(\n  <React.StrictMode>\n    <StateProvider initialState ={initialState} reducer={reducer}>\n      <App />\n    </StateProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}